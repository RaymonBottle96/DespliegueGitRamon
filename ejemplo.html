<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <html>
    <head>
      <title>No Title</title>
      <meta http-equiv="content-type" content="text/html;charset=utf-8" />
      <link rel="stylesheet" type="text/css" href=""/>
      <script type="text/javascript">
       
       /* Por simplicidad el objeto petición será global */

       var req

 
       /*   
       Función que realizará la petición 
	*/

       function peticionAJAX(){

	 // Inicializamos el objeto petición
	 if (window.XMLHttpRequest) {
	   req=new XMLHttpRequest(); 
	 } else if (window.ActiveXObject) {
	   req=new ActiveXObject("Microsoft.XMLHTTP"); 
	 } 

	 // Configuramos el callback para procesar la respuesta y enviamos la petición
	 req.onreadystatechange = respuestaAJAX;
	 req.open("GET", "http://localhost/ejemplo.php");
	 req.send(null);
       }



       /* 
       Programamos la función que esperará a recibir la respuesta 
	*/

       function respuestaAJAX(){
	 if(req.readyState == 4) {
	   if (req.status == 200) {
	     // Modificamos el DOM para meter el texto recibido
	     document.getElementById("caja").innerHTML=req.responseText
	   }
	 }
       }

	 /*
	 Enlazamos el evento del botón a la función de petición 
	  */
	 window.onload=function(){
	   document.getElementById("activador").onclick=peticionAJAX
	 }

      </script>
      <style>
       #container{
	 width:50%;
	 margin:0 auto;
       }
       #caja{
	 margin-top:30px;
	 border:1px solid black;
	 min-height:100px;
       }
      </style>
    </head>
    <body>

      <div id="container">
	<h1>Ejemplo sencillo de AJAX</h1>

	<p> Vamos a realizar una petición al servidor para rellenar esta
  caja. Le pediremos al servidor los datos, los introduciremos en la
  caja y todo esto sin necesidad de recargar este documento</p>
	
	<input type="button" id="activador" value="Rellena con datos">

	<div id="caja">

	</div>
      </div>

    </body>
  </html>
